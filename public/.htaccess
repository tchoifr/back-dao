<IfModule mod_negotiation.c>
    Options -MultiViews
</IfModule>

<IfModule mod_rewrite.c>
    Options -MultiViews
    RewriteEngine On

    # Adjust RewriteBase if your app is in a subdirectory
    RewriteBase /

    # Pass Authorization header to PHP (for JWT/Bearer tokens)
    SetEnvIfNoCase Authorization "^(.*)$" HTTP_AUTHORIZATION=$1

    # Remove index.php from URLs
    RewriteCond %{THE_REQUEST} \s/+index\.php [NC]
    RewriteRule ^ / [L,R=301]

    # If the requested filename exists, serve it directly
    RewriteCond %{REQUEST_FILENAME} -f
    RewriteRule ^ - [L]

    # If the requested directory exists, serve it directly
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^ - [L]

    # Otherwise route to the front controller
    RewriteRule ^ index.php [L]
</IfModule>

